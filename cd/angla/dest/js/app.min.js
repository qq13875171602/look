!function(){var e=angular.module("myapp",["ngRoute","controllers","directives","services"]);angular.module("controllers",[]),angular.module("directives",[]),angular.module("services",[]),e.config(["$logProvider",function(e){e.debugEnabled(!0)}]),e.config(["$httpProvider",function(e){e.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var s=function(e){var o,n,t,a,l,i,d="";for(o in e)if((n=e[o])instanceof Array)for(i=0;i<n.length;i++)a=n[i],(l={})[o+"["+i+"]"]=a,d+=s(l)+"&";else if(n instanceof Object)for(t in n)a=n[t],(l={})[o+"."+t]=a,d+=s(l)+"&";else null!=n&&(d+=encodeURIComponent(o)+"="+encodeURIComponent(n)+"&");return d.length?d.substr(0,d.length-1):d};e.defaults.transformRequest=[function(e){return angular.isObject(e)&&"[object File]"!==String(e)?s(e):e}]}]),e.config(["$routeProvider",function(e){e.when("/",{templateUrl:"html/user/user.html"}).when("/admin",{templateUrl:"html/user/admin/admin.html"}).when("/zhuce",{templateUrl:"html/user/zhuce/zhuce.html"}).when("/denglu",{templateUrl:"html/user/denglu/denglu.html"}).when("/yemian",{templateUrl:"html/user/houtai/yemian.html"}).when("/bokeTypeAdd",{templateUrl:"html/user/houtai/bokeTypeAdd.html"}).when("/book",{templateUrl:"html/user/houtai/book.html"}).otherwise({templateUrl:"html/user/user.html"})}])}(),angular.element(document).ready(function(){angular.module("myapp").run(["$rootScope","$log",function(e,o){o.info("测试模块"),e.title="网站项目"}]),angular.bootstrap(document,["myapp"])}),angular.module("controllers").controller("conpl",["$log","$scope","$location","datahttp","$rootScope","$window",function(e,n,t,o,a,l){e.debug("conpl"),n.$on("$destroy",function(){e.debug("销毁控制器")}),n.data={},a.name={},n.denglu=function(){o.data("/denglu/Index",n.data,function(e,o){if(!e)return o.Souse?(console.log("登录成功"),t.path("/yemian"),a.name=n.data.user,void(l.localStorage.mylocal=a.name)):void 0;console.log("登录失败")})},n.plo=function(){n.data={}}}]),function(){var e=angular.module("directives");e.directive("aletDialog",["$log","Dataservice",function(t,a){return{restrict:"AE",template:"<div class='modal' style='z-index:1900;' role='dialog' tabindex='-1' data-backgrop='static' data-keyborad='false' >                 <div class='modal-dialog'>                      <div class='modal-content'>                       <div class='modal-header'>              <button type='button' class='close' data-dismiss='modal' aria-label='Close' >&times;</button>                      <span class='modal-title' ng-bind='atitle'></span>          </div>                          <div class='modal-body'>                 <span ng-bind='infos'></span>          </div>                    <div class='modal-footer'>           <button type='button' data-dismiss='modal' class='btn btn-primary' ng-bind='btnok'></button>     </div>       </div    </div>     </div>",replace:!0,link:function(e,o,n){e.$on("$destroy",function(){t.debug("销毁控制器")}),t.debug("aldiog",o),a.artDalog({scope:e,element:o})}}}]);e.directive("warDialog",["$log","Dataservice",function(t,a){return{restrict:"AE",template:"<div class='modal' role='dialog' data-backgrop='static' tabindex='-1' data-keyborad='false' style='z-index:1995'>     <div class='modal-dialog'>       <div class='modal-content'>             <div class='modal-header'>        <button type='button' class='close' data-dismiss='modal' aria-label='Close' >&times;</button>      <span  ng-bind='otitle'></span>                           </div>          <div class='modal-body'>     <span ng-bind='poinfo'></span>         </div>                                                                                 </div>                    </div>                        </div>",replace:!0,link:function(e,o,n){e.$on("$destroy",function(){t.debug("控制器销毁")}),t.debug("warDialog",o),a.warldaloh({scope:e,element:o})}}}]);e.directive("setqwDialog",["$log","Dataservice",function(t,a){return{restrict:"AE",template:"<div class='modal' role='dialog' data-backgrop='static' tabindex='-1' data-keyborad='false' style='z-index:1998'>     <div class='modal-dialog'>    <div class='modal-content'>      <div class='modal-header'>           <button type='button' class='close' data-dismiss='modal'  aria-label='Close'>&times;</button>        <span  ng-bind='titlesad'></span>                                       </div>                 <div class='modal-body'>    <span ng-bind='qwinfo'></span>     </div>                  <div class='modal-footer'>     <button type='button' data-dismiss='modal' class='btn btn-primary' ng-click='comlp()'  ng-bind='mjbynok'></button>        <button type='button' data-misdiss='modal' class='btn btn-info' ng-click='nolkp()' ng-bind='qnok' ></button>                                  </div>                                           </div>                                     </div>                        </div>",replace:!0,link:function(e,o,n){e.$on("$destroy",function(){t.debug("控制器销毁")}),t.debug("setqwDialog",o),a.setqwpdiao({scope:e,element:o}),e.comlp=a.tyshg,e.nolkp=a.sacha}}}]);e.directive("customDialog",["$log","Dataservice",function(t,a){return t.debug("directive custom-dialog..."),{restrict:"AE",template:"<div class='modal' data-backdrop='static' data-keyboard='false' tabindex='-1' role='dialog' style='z-index: 1500;'>    <div class='modal-dialog' role='document'>        <div class='modal-content'>            <div class='modal-header'>    <button type='button' class='close' data-dismiss='modal'  aria-label='Close'>&times;</button>            <div class='modal-title' ng-bind='customTitle'></div>            </div>            <div class='modal-body'>                <div ng-include='customPage'></div>            </div>        </div>    </div></div>",replace:!0,link:function(e,o,n){e.$on("$destroy",function(){t.debug("directive custom-dialog destroy...")}),t.debug("directive custom-dialog init==>",o),a.setCustomDialog({scope:e,element:o})}}}])}(),angular.module("controllers").controller("plk",["$log","$scope","datahttp","$rootScope","Dataservice",function(n,t,o,e,a){n.debug("plk"),t.$on("$destroy",function(){n.debug("销毁控制器")}),t.op=!0,t.bn=!0,t.like={},t.shuju={},t.query={},t.mohu={},t.lick=function(){t.op=!1},t.ke=function(){t.op=!0},t.zx=function(){t.bn=!1},t.cv=function(){t.bn=!0},t.add=function(){a.wadlklog("正在进入中"),o.data("/houtai/Index",t.shuju,function(e,o){return a.hidewardialog(),e?(a.setdialog("服务器忙"),void n.debug("err",e)):o.Souse?(a.awstdialog("添加成功",function(){a.hidedialog()},function(){a.hidedialog()}),t.shuju.Booktype={},void t.ag()):void 0})},t.ag=function(){a.wadlklog("正在进入中"),o.data("/houtai/Query",{},function(e,o){if(a.hidewardialog(),!e)return o.Souse?(t.pl=o.List,void(t.like.book={Tid:t.pl[0].tid})):void 0;a.setdialog("查询失败")})},t.ag(),t.tianjia=function(){a.wadlklog("正在添加中"),o.data("/houtai/Add",t.like,function(e,o){if(a.hidewardialog(),!e)return o.Souse?(a.setdialog("添加成功",function(){a.hidedialog()}),void t.okl()):void 0;a.setdialog("添加失败",function(){a.hidedialog()})})},t.okl=function(){o.data("/houtai/select",{"page.PageSize":2,"page.PageNumber":1},function(e,o){if(!e)return o.Souse?(console.log("查询成功"),t.query=o.list,void(t.page=o.page)):void 0;console.log("查询失败")})},t.okl(),t.sd=function(e){o.data("/houtai/select",{"page.PageSize":2,"page.PageNumber":e},function(e,o){if(!e)return o.Souse?(console.log("查询成功"),t.query=o.list,void(t.page=o.page)):void 0;console.log("查询失败")})},t.qw=function(e){o.data("/houtai/select",{"page.PageSize":2,"page.PageNumber":e},function(e,o){if(!e)return o.Souse?(console.log("查询成功"),t.query=o.list,void(t.page=o.page)):void 0;console.log("查询失败")})},t.ty=function(e){o.data("/houtai/select",{"page.PageSize":2,"page.PageNumber":e},function(e,o){if(!e)return o.Souse?(console.log("查询成功"),t.query=o.list,void(t.page=o.page)):void 0;console.log("查询失败")})},t.delete=function(e){o.data("/houtai/delete",{"book.bid":e},function(e,o){if(!e)return o.Souse?(console.log("删除成功"),void t.okl()):void 0;console.log("删除失败")})}}]),angular.module("controllers").controller("mask",["$log","$scope","Dataservice","datahttp",function(e,o,n,t){e.debug("controllers.mask"),o.$on("$destroy",function(){e.debug("控制器销毁")}),o.add=function(){n.wadlklog("正在加载中"),t.data("/QianAdd/Index",o.vb,function(e,o){n.hidewardialog(),e?n.setdialog("添加失败"):o.Souse&&n.setdialog("添加成功",function(){})})}}]),angular.module("controllers").controller("denglu",["$log","$scope","Dataservice",function(e,o,n){e.debug("controllers.denglu"),o.$on("$destroy",function(){e.debug("denglu,销毁控制台")}),o.add=function(){n.showCustomDialog("/html/user/qiantai/denglu.html")},o.zhuce=function(){n.showCustomDialog("/html/user/qiantai/zhuce.html")}}]),angular.module("controllers").controller("dengl",["$log","$scope","Dataservice","datahttp",function(e,o,n,t){e.debug("controller.dengl"),o.$on("$destroy",function(){e.debug("销毁控制器")}),o.po={},o.deng=function(){n.wadlklog("正在登录中"),t.data("/Qiandenglu/Index",o.po,function(e,o){n.hidewardialog(),e?n.setdialog("登录失败"):o.Souse&&n.setdialog("登录成功",function(){n.hideCustomDialog()})})},o.chongzi=function(){o.po={}}}]),angular.module("services").factory("Dataservice",["$log","$timeout",function(t,a){t.debug("Dataservice"),service={};var l="图书管理",i=null;service.alttitle=function(e){i=e},service.temptitle=function(e){l=e};var n=null;service.tempbtnok=function(e){n=e};var d={huidiao:angular.noop,couhs:!1};service.artDalog=function(e){t.debug("Dataservice.artDalog",e),d.scope=e.scope,d.element=e.element,d.element.on("hidden.bs.modal",function(){var e=d.huidiao;d.huidiao=angular.noop,e()}),d.couhs=!0},service.setdialog=function(e,o){d.couhs&&a(function(){d.huidiao=o||angular.noop,d.scope.infos=e,d.scope.atitle=i||l,d.scope.btnok=n||"确认",i=n=null,d.element.modal("show")})},service.hidedialog=function(){d.element.modal("hide")};var s={huidiao:angular.noop,couhs:!1};service.warldaloh=function(e){t.debug("Dataservice.warldaloh",e),s.scope=e.scope,s.element=e.element,s.element.on("hidden.bs.modal",function(){var e=s.huidiao;s.huidiao=angular.noop,e()}),s.couhs=!0},service.wadlklog=function(e,o){s.couhs?a(function(){s.huidiao=o||angular.noop,s.scope.poinfo=e,s.scope.otitle=l||i,i=null,s.element.modal("show")}):t.debug("wadlklog")},service.hidewardialog=function(){s.element.modal("hide")};var u="确认",c="取消",r=null,g=null;service.pok=function(e){u=e},service.mnok=function(e){c=e},service.wsca=function(e){r=e},service.lpo=function(e){g=e};var m={yes:angular.nnop,lno:angular.noop,chons:"no",couhs:!1};service.setqwpdiao=function(e){t.debug("Dataservice.setqwpdiao",e),m.scope=e.scope,m.element=e.element,m.couhs=!0},service.awstdialog=function(e,o,n){m.couhs&&a(function(){m.yes=o||angular.noop,m.lno=n||angular.noop,m.scope.qwinfo=e,m.scope.titlesad=i||l,i=null,m.scope.mjbynok=u||r,r=null,m.scope.qnok=c||g,g=null,m.element.on("hidden.bs.modal",function(){var e="no"==m.chons?m.yes:m.lno;m.chons="no",m.yes=angular.noop,m.lno=angular.noop,e()}),m.element.modal("show")},4e3)},service.wqer=function(){m.element.modal("hide")},service.tyshg=function(){m.chons="yes",m.element.modal("hide")},service.sacha=function(){m.chons="no",m.element.modal("hide")};var p={closefn:angular.noop,hasinit:!1,data:{}};return service.setCustomDialog=function(e){t.debug("DialogService.setCustomDialog==>",e),p.scope=e.scope,p.element=e.element,p.element.on("hidden.bs.modal",function(){var e=p.closefn;p.closefn=angular.noop,e()}),p.hasinit=!0},service.showCustomDialog=function(e,o,n){p.hasinit?a(function(){p.scope.customPage=e,e="",p.data=o||{},p.closefn=n||angular.noop,p.scope.customTitle=i||l,i=null,p.element.modal("show")}):t.debug("DialogService.showCustomDialog not init...")},service.hideCustomDialog=function(){p.element.modal("hide")},service.getCustomData=function(){var e=p.data;return p.data={},e},service}]),angular.module("services").factory("datahttp",["$log","$http",function(t,a){var e={data:function(e,o,n){a({method:"POST",url:"http://localhost:1050/"+e,data:o}).then(function(e){t.debug("正确信息",e.data),n(null,e.data)},function(e){t.debug("错误信息",e),n(e,null)})}},r=["星期六","星期一","星期二","星期三","星期四","星期五","星期天"];return e.time=function(e,o){var n=new Date;e&&n.setTime(e),o||o("y-m-d");var t=n.getFullYear(),a=n.getMonth()+1,l=n.getDate(),i=n.getHours(),d=n.getMinutes(),s=n.getSeconds(),u=n.getDay();a=a<10?"0"+a:""+a,l=l<10?"0"+l:""+l,i=i<10?"0"+i:""+i,d=d<10?"0"+d:""+d,s=s<10?"0"+s:""+s,u=r[u];var c=o.replace("y",t);return c=(c=(c=(c=(c=(c=c.replace("m",a)).replace("d",l)).replace("h",i)).replace("i",d)).replace("s",s)).replace("w",u)},e}]),angular.module("controllers").controller("contr",["$scope","$log","datahttp","$location",function(e,o,n,t){o.debug("contr...."),e.$on("$destroy",function(){o.debug("销毁控制器")}),e.user={},e.dataas=function(){n.data("/zhuce/Index",e.user,function(e,o){e.Souse?console.log("添加成功"):err&&console.log("添加失败")})},e.kong=function(){e.user={}}}]);